
#!/usr/bin/env python
# vim: set fileencoding=UTF-8 filetype=python :
#
#  When the configuration file is loaded, several automatic transformations
#  are applied:
#
# 1) '{cfg_abs_path}' as a substring of atomic attributes is replaced by
#    an absolute path of the configuration files.  This can be used to
#    make the configuration file independent of the location of programs
#    using the configuration file.
#
# or better user use the as_project_path function
import os

from alex.utils.config import as_project_path, online_update
from alex.utils.mproc import SystemLogger
from alex.utils.sessionlogger import SessionLogger

config = {
    'ASR': {
        'debug': True,
        'type': 'Kaldi',
        'Kaldi': {
            'debug': False,
            'verbose': 0,
            'max_dec_frames': 10,
            'n_best': 100,
            'config': online_update('applications/PublicTransportInfoCS/hclg/models/mfcc.conf'),
            'model': online_update('applications/PublicTransportInfoCS/hclg/models/tri2b_bmmi.mdl'),
            'matrix': online_update('applications/PublicTransportInfoCS/hclg/models/tri2b_bmmi.mat'),
            'wst': online_update('applications/PublicTransportInfoCS/hclg/models/words.txt'),
            'hclg': online_update('applications/PublicTransportInfoCS/hclg/models/HCLG_tri2b_bmmi.fst'),
            'silent_phones': online_update('applications/PublicTransportInfoCS/hclg/models/silence.csl'),
            'calibration_table':  [(0.9452620776031909, 2.0, 0.85571952335105006), (0.01186310213049468, 0.04241401567627658, 0.018454481098128212), (0.04241401567627658, 0.05608513869468299, 0.040009771949307049), (0.05608513869468299, 0.07307441456478987, 0.062293623292840397), (0.07307441456478987, 0.08628387200611726, 0.08621255920197049), (0.10684095462520984, 0.12530118619863273, 0.13049030011646187), (0.12530118619863273, 0.14871864976315857, 0.154312946932088), (0.08628387200611726, 0.10684095462520984, 0.10975095041717982), (0.3808327056891802, 0.43512257259635095, 0.37396021590538969), (0.1931725905851571, 0.2186663993620007, 0.22459347994278495), (0.2186663993620007, 0.2485005692963505, 0.2492154488972777), (0.14871864976315857, 0.17098493940151033, 0.1816772813751158), (0.2485005692963505, 0.29099442364214473, 0.2762209784463181), (0.29099442364214473, 0.33623596199078537, 0.30584081216359776), (0.17098493940151033, 0.1931725905851571, 0.2021446938860218), (0.33623596199078537, 0.3808327056891802, 0.33832803104394255), (0.5724114943557862, 0.6136312200889544, 0.50292130778230326), (0.4757073870799935, 0.5086417891420355, 0.43397927679153681), (0.6846171573346211, 0.7247506768611667, 0.58211287737630257), (0.9199608484796927, 0.9452620776031909, 0.81574039005760901), (0.8821095161486344, 0.9162065924722105, 0.74111582725928582), (0.7247506768611667, 0.7613858075771524, 0.61104489097480386), (0.5086417891420355, 0.5257669692419665, 0.45590676597542157), (0.7613858075771524, 0.8099205478704897, 0.64134496013136022), (0.8099205478704897, 0.8387384079169713, 0.67307777360341214), (0.8387384079169713, 0.8821095161486344, 0.70631107896813383), (0.6136312200889544, 0.6526764401679349, 0.52810873351914944), (0.9162065924722105, 0.9199608484796927, 0.77756632444324569), (0.6526764401679349, 0.6846171573346211, 0.55448715129168935), (0.43512257259635095, 0.4757073870799935, 0.41304181912530991), (0.5257669692419665, 0.5724114943557862, 0.47887110049846965), (-2.0, 0.01186310213049468, 0.018454481098128212)],
            'extra_args': '  --max-mem=10000000000 --acoustic-scale=0.1 --beam=12.0 --lattice-beam=5.0 --max-active=2000 --left-context=3 --right-context=3',  # pg CLASS LM weight 0.8
        },
    },
}
